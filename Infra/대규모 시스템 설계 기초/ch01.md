# 사용자 수에 따른 규모 확장성

* 한명의 사용자부터 최종적으로 몇백만이 사용하는 시스템을 대략적으로 이야기해 본다.

## 단일 서버

* 최초에는 웹 앱, 데이터베이스, 캐시 등이 전부 서버 한대에서 실행된다.

![그림 1-2](https://lh3.googleusercontent.com/pw/AL9nZEW9v1RuppoO54jXe8uQaFu8MYmDpRCQiXE-jDpH3Hu8Gn8yQV86fcQpkt22q356igX8ncR0sW-o5fMVDd0tTlbalcuhuwGSjdgh828wGg03VJnk_2JXzq0cRJzY1VOVD9BIK8I3h8L8Cg55bSIShu_Rig=w2556-h1822-no?authuser=0)

* 사용자 요청 흐름
  1. 사용자는 도메인 이름 (api.mysite.com)을 이용하여 웹사이트에 접속한다.
  2. 도메인 이름을 DNS에 질의하여 IP 주소로 변환한다.
  3. 반환된 IP를 통해 HTTP요청이 전달된다.
  4. 요청을 받은 웹서버는 html 페이지나 기타 응답(json, xml 등)형태로 반환한다.

## 데이터베이스
* 사용자가 늘면 서버 하나로는 춛분하지 않아서 각자 담당하는 일이 다른 서버 계층(layer)을 두어야 한다.
* 일반적으로 웹/모바일 트래픽 처리 용도, 다른 하나는 데이터베이스용이다.
* 각 계층을 분리하면 그 각각을 독립적으로 확장해 나갈 수 있다.

![그림 1-3](https://lh3.googleusercontent.com/pw/AL9nZEVPt-kO5G4Tm1X7JR5MAOhAGA2Hmdhw9es0k0LmCVdIKAmiSt6pAqy3lh58bCJWyEpY--KlJSOHds4cDneqdzlUT0nJbEEM4o9z3N_vOTpCX6wSVvY6I23Ay0AYjFBxJdTsxDNab_i5NGcbxA9nm4mbqQ=w2994-h1822-no?authuser=0)

