
## 상속
## entity 상태
- 엔티티의 생명 주기
  - 비영속 : 영속성 컨텍스트와 전혀 관계가 없는 상태
    - 엔티티 객체를 생성했고 순수한 객체 상태
    - 저장하기 전 상태, 영속성 컨텍스트나 데이터베이스와 상관이 없음
  - 영속 : 영속성 컨텍스트에 저장된 상태
    - 엔티티 매니저를 통해서 엔티티를 영속성 컨텍스트에 저장했다.
    - 영속성 컨텍스트가 관리하는 엔티티를 영속 상태라고 한다.
    - 조회한 엔티티도 영속성 컨텍스트가 관리하는 영속 상태이다.
  - 준영속 : 영속성 컨텍스트에 저장되었다가 분리된 상태
    - 영속성 컨텍스트가 관리하던 영속 상태의 엔티티를 영속성 컨텍스트가 관리하지 않는 상태
  - 삭제 : 삭제된 상태
## 케스케이드 todo
## 매핑 방법 todo
- https://kok202.tistory.com/138
## n+1 문제
  - Q23으로
## 영속성 컨텍스트
- 엔티티를 저장하는 환경
- 일반적으로 엔티티 메니저를 생성할 때 하나 만들어 진다.
- 영속성 컨텍스트는 엔티티를 식별자 값(@Id)으로 구분한다, 그래서 식별자 값이 반드시 필요하다.
- 트랜잭션을 커밋하는 순간 영속성 컨텍스트에 새로 저장된 엔티티를 데이터베이스에 반영한다 (flush)
- 1차 캐시를 지원
  - 빠르게 엔티티를 가지고 올 수 있다.
- 트랜잭션을 지원하는 쓰기 지연
  - 트랜잭션 전에 변경이 일어난 sql을 한번에 날려 성능 최적화를 할 수 있다.
- 동일성 보장
  - id값을 기준으로 캐시에 저장해둠, 그렇기 때문에 동일한 조건에 쿼리면 동일한 엔티티가 반환
- 변경 감지
  - 스냅샷을 통한 더티 채킹 기능
- 지연 로딩
## 엔티티 매니저
- 엔티티 팩토리로 부터 엔티티 매니저를 생성
- 엔티티 팩토리는 쓰레드 세이프, 엔티티매니저는 쓰레드 세이프 하지 않음
- 영속성 컨텍스트에 엔티티를 보관한다.
## QUERY DSL todo